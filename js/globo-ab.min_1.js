!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.GloboAB=t():e.GloboAB=t()}(this,(function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.options=t}return r(e,[{key:"getParams",value:function(e){var t={skipImpressions:this.isSkippedImpression()};return Object.assign({},t,e)}},{key:"getLocationParams",value:function(){return{drawed:!0,countImpressions:!this.isSkippedImpression()}}},{key:"getHeaders",value:function(){return this.options.extraHeaders||[]}},{key:"getHeader",value:function(e){var t="";return this.getHeaders().forEach((function(n){Object.keys(n).forEach((function(r){e===r&&(t=n[r])}))})),t}},{key:"getDict",value:function(){return this.options}},{key:"getTimeout",value:function(){var e=this.options.timeout;return void 0===e&&(e=1e3),e}},{key:"skipImpression",value:function(){return this.options.skipImpressions=!0,this}},{key:"timeout",value:function(e){return this.options.timeout=e,this}},{key:"isFieldSetted",value:function(e){return void 0!==e&&!1!==e}},{key:"isSkippedImpression",value:function(){return this.isFieldSetted(this.options.skipImpressions)}},{key:"addHeader",value:function(e){var t=[];return this.options.hasOwnProperty("extraHeaders")&&(t=this.options.extraHeaders),t.push(e),this.options.extraHeaders=t,this}},{key:"withOriginURL",value:function(t){return new e(this.clone(this.options)).originURL(t)}},{key:"originURL",value:function(e){return this.addHeader({"x-canonical-uri":e}),this}},{key:"getOriginURL",value:function(){return this.getHeader("x-canonical-uri")}},{key:"enableGADebugger",value:function(){return this.options.enableGADebugger=!0,this}},{key:"isEnabledGADebugger",value:function(){return this.isFieldSetted(this.options.enableGADebugger)}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}],[{key:"validated",value:function(t){if(t instanceof e)return t;if(void 0===t)return new e;throw new TypeError("GloboABOptions não válido")}}]),e}();e.exports=i},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(9),o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.abHost=t}return r(e,[{key:"oneWaySend",value:function(e,t,n,r){this.do("PUT",e,null,t,null,null,n,r)}},{key:"do",value:function(e,t,n,r,o,a){var s=this,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1e3,l="",f=i.interceptParams(t,n);for(var p in f)f.hasOwnProperty(p)&&(l+="&"+p+"="+f[p]);l&&(l="?"+l.substring(1));var v=this.abHost+t+l,h=this.createXHR();h.open(e,v,!0),h.timeout=c,h.onload=function(){h.status>=200&&h.status<400?s.callIfDefined(o,h):s.callIfDefined(a,s.handleError(h,v))},h.onerror=function(e){s.callIfDefined(a,s.handleError(e,v))},h.ontimeout=function(e){s.callIfDefined(a,s.handleError(e,v))},r&&(h.setRequestHeader("Content-Type","application/json;charset=utf-8"),r=JSON.stringify(r)),Array.from(u).forEach((function(e){Object.keys(e).forEach((function(t){h.setRequestHeader(t,e[t])}))})),h.send(r)}},{key:"handleError",value:function(e,t){var n={};return n.type=e.type?e.type:"undefined",e.target instanceof XMLHttpRequest&&(e=e.target),e instanceof XMLHttpRequest?(n.status=e.status,n.url=t,n.timeout=e.timeout,n.msg=e.responseText):n.msg=e.toString(),n}},{key:"createXHR",value:function(){var e=new XMLHttpRequest;return e.withCredentials=!0,e}},{key:"callIfDefined",value:function(e,t){e&&e(t)}}]),e}();e.exports=o},function(e,t,n){"use strict";var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":i(window))&&(r=window)}e.exports=r},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=n(15),a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.abHost=t,this.request=new i(this.abHost),this.requestWrapper=new o(this.abHost)}return r(e,[{key:"selectedAlternatives",value:function(e,t,n,r){this.request.do("GET","/v2/selected-alternatives",t.getParams({experiments:e}),null,n,r,t.getHeaders(),t.getTimeout())}},{key:"recordMetric",value:function(e,t,n){var r="/v2/tests/"+t.testId+"/"+e,i={experiment:t.experiment,alternative:t.alternative};this.requestWrapper.oneWay(r,i,n.getHeaders(),n.getTimeout())}}]),e}();e.exports=a},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.data=t||{},this.context=n,this.options=r,this.experiment=this._getStringFromData("experiment"),this.alternative=this._getStringFromData("alternative"),this.testId=this._getStringFromData("testId"),this.properties=this._getPropertiesFromData()}return r(e,[{key:"isValid",value:function(){return"string"==typeof this.experiment&&""!==this.experiment.trim()&&"string"==typeof this.alternative&&""!==this.alternative.trim()&&"string"==typeof this.testId&&""!==this.testId.trim()}},{key:"impression",value:function(e){if(this.isValid()){var t=e||this.options;this._sendMetric("impression",t)}else console.warn("Os dados do exp não são válidos para impressão")}},{key:"conversion",value:function(e){if(this.isValid()){var t=e||this.options;this._sendMetric("conversion",t)}else console.warn("Os dados do exp não são válidos para conversão!")}},{key:"_canProcessEvent",value:function(){return!(this.data&&this.data["extra-info"]&&this.data["extra-info"]["draw-rule"]&&void 0!==this.data["extra-info"]["draw-rule"]["process-event"])||this.data["extra-info"]["draw-rule"]["process-event"]}},{key:"_sendMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options;if(this._canProcessEvent()){var n={experiment:this.experiment,alternative:this.alternative,testId:this.testId};this.context.abEndpoint.recordMetric(e,n,t)}else console.warn("Nao será enviado sinais de impressão ou conversão, uma vez que o experimento foi finalizado ou desativado.")}},{key:"_getPropertiesFromData",value:function(){var e={};return(Array.isArray(this.data.properties)?this.data.properties:[]).forEach((function(t){var n=t.key,r=t.value;e[n]=r})),e}},{key:"_getStringFromData",value:function(e){return"string"==typeof this.data[e]?this.data[e]:null}}],[{key:"parseRequest",value:function(t,n,r){var i=JSON.parse(t),o={};for(var a in i.experiments)if(i.experiments.hasOwnProperty(a)){var s=new e(i.experiments[a],n,r);o[a]=s}return o}}]),e}();e.exports=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(3),a=n(4),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.server=t,this.abEndpoint=new o(this.server),this._options=n}return r(e,[{key:"options",value:function(){return this._options}},{key:"impression",value:function(e,t){this._getExperiment(e,t).impression()}},{key:"conversion",value:function(e,t){this._getExperiment(e,t).conversion()}},{key:"choose",value:function(e){return"string"==typeof e&&""!==e.trim()?this._chooseOne(e):Array.isArray(e)&&e.length>0?this._chooseMulti(e):Promise.reject(new TypeError("Para sorteio o experimento precisa ser uma string ou uma lista válida."))}},{key:"_chooseOne",value:function(e){var t=this;return new Promise((function(n,r){t.abEndpoint.selectedAlternatives(e,t.options(),(function(r){var i=a.parseRequest(r.responseText,t,t.options())[e];n(i)}),(function(e){r(e)}))}))}},{key:"_chooseMulti",value:function(e){var t=this,n=e.join(",");return new Promise((function(e,r){t.abEndpoint.selectedAlternatives(n,t.options(),(function(n){var r=a.parseRequest(n.responseText,t,t.options());e(r)}),(function(e){r(e)}))}))}},{key:"_getExperiment",value:function(e,t){var n=t||this._options;return void 0!==e&&e.__proto__&&e.__proto__.constructor&&"Experiment"===e.__proto__.constructor.name?(e.options=n,e):new a(e,this,n)}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11),o=n(10),a=n(0),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new a;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.server=t,this.abEndpoint=new o(this.server),this._options=n}return r(e,[{key:"options",value:function(){return this._options}},{key:"choose",value:function(e){var t=this;return new Promise((function(n,r){t.abEndpoint.selectedDrawedExperiment(e,t.options(),(function(e){var r=i.parseRequest(e.responseText,t,t.options());n(r)}),(function(e){r(e)}))}))}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(12),a=n(13),s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.server=t,this._options=n,this.mabEndpoint=new o(this.server)}return r(e,[{key:"options",value:function(){return this._options}},{key:"increment",value:function(e){var t=e.experiment,n=e.arm,r=e.testId,i=e.abAlternative,o=e.arms;new a({experiment:t,arm:n,testId:r,abAlternative:i,arms:void 0===o?[]:o},this,this.options()).increment()}},{key:"reward",value:function(e){var t=e.experiment,n=e.arm,r=e.testId,i=e.abAlternative,o=e.slot,s=void 0===o?0:o;new a({experiment:t,arm:n,testId:r,abAlternative:i},this,this.options()).reward(s,n)}},{key:"choose",value:function(e){var t=this;return new Promise((function(n,r){t.mabEndpoint.getSelectedArm(e,t.options(),(function(r){var i=a.parseRequest(r.responseText,e,t,t.options());n(i)}),(function(e){r(e)}))}))}}]),e}();e.exports=s},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=n(5),a=n(7),s=n(6),u=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.env=this._getEnv(t),this._options=new i,this.abMain=new o(this._getServer(this.env),this._options)}return r(e,[{key:"createOptions",value:function(){return this._options=new i,this.abMain=new o(this._getServer(this.env),this._options),this._options}},{key:"options",value:function(){return this._options}},{key:"mab",value:function(){return new a(this._getMabServer(this.env),this.options())}},{key:"location",value:function(){return new s(this._getServer(this.env),this.options())}},{key:"impression",value:function(e,t){this.abMain.impression(e,t)}},{key:"conversion",value:function(e,t){this.abMain.conversion(e,t)}},{key:"choose",value:function(e){return this.abMain.choose(e)}},{key:"_getEnv",value:function(e){return"prod"===e||"prod.be"===e||"qa"===e||"qa.be"===e||"local"===e?e:"qa"}},{key:"_getServer",value:function(e){return"local"===this.env?"http://localhost:8888":"prod"===this.env?"https://globo-ab.globo.com":"prod.be"===this.env?"http://be.globo-ab.globoi.com":"qa.be"===this.env?"http://be.globo-ab.qa.globoi.com":"https://globo-ab.qa.globoi.com"}},{key:"_getMabServer",value:function(e){return"local"===this.env?"http://localhost:8888":"prod"===this.env?"https://globo-mab.globo.com":"prod.be"===this.env?"http://be.globo-mab.globoi.com":"qa.be"===this.env?"http://be.globo-mab.qa.globoi.com":"https://globo-mab.qa.globoi.com"}}]),e}();e.exports=u},function(e,t,n){"use strict";(function(t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getPluginParams",value:function(){var t={},n=["ab-client-context","ab-client-experiment","ab-client-alternative"],r=e.getDocumentLocationSearch().substr(1).split("&");for(var i in r)if(r.hasOwnProperty(i)){var o=r[i].split("=");n.indexOf(o[0])>-1&&(t[o[0]]=o[1])}return t}},{key:"getDocumentLocationSearch",value:function(){return document.location.search}},{key:"isCompatibleWithPlugin",value:function(){return void 0!==t.window}},{key:"interceptParams",value:function(t,n){try{if(e.isCompatibleWithPlugin()&&t){var r=void 0,i=void 0;if(t.indexOf("/location/")>-1){var o=t.split("/");r=o[o.length-1]}else t.indexOf("selected-alternatives")>-1&&(i=n.experiments||n.experiment);if(i||r)return Object.assign({},n,this.getExperimentSettings(r,i))}}catch(e){console.error(e)}return n}},{key:"getExperimentSettings",value:function(e,t){var n=this.getPluginParams();if(e&&n["ab-client-context"]===e&&n["ab-client-experiment"]){var r={experiment:n["ab-client-experiment"],alternative:n["ab-client-alternative"]};return r.alternative||delete r.alternative,r}return t&&t.includes(n["ab-client-experiment"])&&n["ab-client-alternative"]?{alternative:n["ab-client-alternative"]}:{}}}]),e}();e.exports=r}).call(t,n(2))},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.abHost=e,n.request=new i(n.abHost),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"selectedDrawedExperiment",value:function(e,t,n,r){this.request.do("GET","/ab/location/"+e,t.getLocationParams(),null,n,r)}}]),t}(n(3));e.exports=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(4),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"parseRequest",value:function(e,t,n){var r=JSON.parse(e),o=Object.keys(r)[0],a=r[o],s=a.alternative,u=a.testId;return new i({experiment:o,alternative:s,testId:u},t,n)}}]),e}();e.exports=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),o=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.abHost=t,this.request=new i(this.abHost)}return r(e,[{key:"getSelectedArm",value:function(e,t,n,r){var i="",o="GET";t.isSkippedImpression()?i="/mab/"+e+"/choose":(i="/mab/"+e+"/chooseAndIncrement",o="POST"),this.request.do(o,i,null,null,n,r,t.getHeaders(),t.getTimeout())}},{key:"recordMABMetric",value:function(e,t,n){var r="/mab/"+t.experiment+"/"+e,i=t.arms?t.arms:[],o={arm:t.arm,testId:t.testId,abAlternative:t.abAlternative,arms:i};this.request.do("POST",r,{},o,null,null,n.getHeaders(),n.getTimeout())}}]),e}();e.exports=o},function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=function(){function e(t,n){var r=t.experiment,o=t.arm,a=t.testId,s=t.abAlternative,u=t.arms,c=void 0===u?[]:u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.experiment=r,this.arm=o,this.testId=a,this.abAlternative=s,this.arms=c,this.context=n,this.options=l}return r(e,[{key:"increment",value:function(){var e=this.arms;0===e.length&&(e=[{slot:0,name:this.arm}]),this._sendMetric("increment",e)}},{key:"reward",value:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=[{slot:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,name:""===e?this.arm:e}];this._sendMetric("reward",t)}},{key:"_sendMetric",value:function(e,t){var n={experiment:this.experiment,arm:this.arm,testId:this.testId,abAlternative:this.abAlternative,arms:t};this._recordMetric(e,n)}},{key:"_recordMetric",value:function(e,t){this.context.mabEndpoint.recordMABMetric(e,t,this.options)}}],[{key:"parseRequest",value:function(t,n,r,i){var o=JSON.parse(t);return o.experiment=n,new e(o,r,i)}}]),e}();e.exports=o},function(e,t,n){"use strict";(function(t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.abHost=t}return n(e,[{key:"send",value:function(e,n){t.navigator.sendBeacon(this.abHost+e,JSON.stringify(n))}}]),e}();e.exports=r}).call(t,n(2))},function(e,t,n){"use strict";(function(t){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(14),o=n(1),a=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.host=t,this.sendBeaconOneWay=new i(this.host),this.xmlHttp=new o(this.host)}return r(e,[{key:"oneWay",value:function(e,t,n,r){this.isBrowserSupportSendBeacon()&&!this.hasHeaders(n)?this.sendBeaconOneWay.send(e,t):this.xmlHttp.oneWaySend(e,t,n,r)}},{key:"isBrowserSupportSendBeacon",value:function(){return!(void 0===t.navigator||!t.navigator.sendBeacon)}},{key:"hasHeaders",value:function(e){return void 0!==e&&e.length>0}}]),e}();e.exports=a}).call(t,n(2))}])}));