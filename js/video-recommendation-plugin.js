var VideoRecommendationPlugin=function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};t.env=window.glb&&window.glb.getCurrentEnv&&window.glb.getCurrentEnv()||"local",t.tenant=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.SITE_ID||"gshow",t.deviceGroup=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.MOBILE_GROUP||"desktop",t.parseMilliseconds=function(e){var t=e/1e3,n=parseInt(t/60,10),i=parseInt(t%60,10);return 1<=n?n+(30<i?1:0)+" min":parseInt(t,10)+" seg"},t.createElement=function(e){var t=document.createElement("div");return t.setAttribute("class",e),t},t.delegate=function(e,t,n,r){var o=function(e,t){return e&&e.classList&&e.classList.contains(t)};i[t+"-"+n]||(i[t+"-"+n]={className:n,cb:r},e.addEventListener(t,(function(e){var t=e.target,i=!0;if(!o(t,n))for(;t&&i;)t=t.parentNode,o(t,n)&&(i=!1);o(t,n)&&r(t,e)})))},t.initCircleProgress=function(e){var t=void 0,n=document.getElementById(e),i=n.getContext("2d");i.lineWidth="4",i.strokeStyle="#fff";var r=n.width/2,o=n.height/2;return{start:function(){return new Promise((function(e){var a;i.clearRect(0,0,n.width,n.height),a=0,t=setInterval((function(){a+=1,i.clearRect(0,0,n.width,n.height),i.beginPath(),i.arc(r,o,40,Math.PI/180*270,Math.PI/180*(270+a)),i.stroke(),360<=a&&(clearInterval(t),e())}),6e3/360)}))},stop:function(){clearInterval(t)}}},t.ajax=function(e){var t=e.url,n=e.method,i=void 0===n?"GET":n,r=e.body,o=void 0===r?null:r;return new Promise((function(e,n){var r=new XMLHttpRequest;r.withCredentials=!0,r.open(i,t),r.onload=function(){200<=r.status&&r.status<300&&e(r.response),n(r.statusText)},r.onerror=function(){return n(r.statusText)},r.send(o)}))},t.logging=function(e){for(var t,n=arguments.length,i=Array(1<n?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return console[e]||(e="log"),(t=console)[e].apply(t,["[player-plugin-videos-recommendation]"].concat(i))},t.getTypeView=function(e){return e.detachOptions.isDetached?"pip":e.isDetached?"fullscreen":"viewport"},t.getVolumeOfElementBsPlayer=function(e){for(var t=0;t<document.getElementsByTagName("bs-player").length;t++){var n=document.getElementsByTagName("bs-player")[t];if(n.videoid==e)return n.WMPlayer.container.volume}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=new(((i=n(14))&&i.__esModule?i:{default:i}).default);r.setHorizonClient(),t.default={sendRecommendationScreenImpression:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];r.commonEvent({eventCategory:"flow-videos",eventAction:"impression",eventLabel:e.toString(),eventValue:null,eventProperty:t.toString()})},sendRecommendationClick:function(e,t,n){r.commonEvent({eventCategory:"flow-videos",eventAction:"click",eventLabel:e.toString(),eventValue:n,eventProperty:t.toString()})},sendStartAutonext:function(e,t,n){r.commonEvent({eventCategory:"autonext-videos",eventAction:"automatic play",eventLabel:n,eventValue:t,eventProperty:e.toString()})},sendAdvanceAutonext:function(e,t,n){r.commonEvent({eventCategory:"autonext-videos",eventAction:"click to play",eventLabel:n,eventValue:t,eventProperty:e.toString()})},sendClickCancelAutonext:function(e,t){r.commonEvent({eventCategory:"autonext-videos",eventAction:"click to cancel",eventLabel:t,eventValue:null,eventProperty:e.toString()})},CATEGORY:"flow-videos"},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PLUGIN_KEYNAME="playerPluginVideosRecommendation",t.PLUGIN_FLOW_NAME="video-recommendation-flow-plugin",t.SEEN_VIDEOS_STORAGE_KEY="seen"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n(4)},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();n(5);var r=n(0),o=u(n(10)),a=u(n(13)),s=u(n(1)),c=n(2),l=u(n(15));function u(e){return e&&e.__esModule?e:{default:e}}var d=Clappr,p=d.Events,f=d.UICorePlugin,v={},h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.core.options.exitFullscreenOnEnd=!1,n.pluginOptions=n.core._options.VideoRecommendationPlugin||{},n.enabled=!1,n.shouldInit&&(n.uniqueId=n.core.uniqueId,n.playerElement=n.core.el,n.titleElement=n.pluginOptions.titleElement,n.recommendationHandler=new l.default({endpoint:n.pluginOptions.endpoint||"https://recomendacao.globo.com/rec/v2/item/"+r.tenant+"/videos-flow",videoId:n.core.options.source}),n.recommendationHandler.onError((function(){(0,r.logging)("warn","Desabilitando plugin."),n.playerElement.classList.remove("video-rec-after-end--enabled"),n.destroy()})),n.mountPluginElement(),n.mountCancelScreen(),n.addClickEvents(),n.enable(),n.addCloseToGlobal()),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f),i(t,[{key:"name",get:function(){return c.PLUGIN_FLOW_NAME}},{key:"playback",get:function(){return this.core.getCurrentPlayback()}},{key:"nextVideo",get:function(){return this.videos[0].content}},{key:"circleProgress",get:function(){return this.circleProgressCache||(this.circleProgressCache=(0,r.initCircleProgress)("canvas-"+this.uniqueId)),this.circleProgressCache}},{key:"supportedVersion",get:function(){return{min:"0.4.0"}}},{key:"shouldInit",get:function(){var e=window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.BRANDED_CONTENT,t=window.cdaaas&&window.cdaaas.SETTINGS&&"g1"===window.cdaaas.SETTINGS.SITE_ID;return!(e&&t)}}]),i(t,[{key:"mountPluginElement",value:function(){this.pluginElement=(0,r.createElement)("video-rec-after-end"),this.pluginElement.innerHTML=this.template(),this.pluginElementTitle=this.pluginElement.getElementsByClassName("video-rec-after-end__screen__title")[0],this.pluginElementBackground=this.pluginElement.getElementsByClassName("video-rec-after-end__screen--next-video")[0],this.playerElement.appendChild(this.pluginElement)}},{key:"mountCancelScreen",value:function(){this.cancelScreen=new a.default(this.playerElement,this.uniqueId),this.cancelScreen.onReplay(this.replayVideo.bind(this)),this.cancelScreen.onClick(this.playVideo.bind(this))}},{key:"addClickEvents",value:function(){var e=this;(0,r.delegate)(this.playerElement,"click","canvas-"+this.uniqueId,function(){s.default.sendAdvanceAutonext(e.nextVideo.video.id,(0,r.getVolumeOfElementBsPlayer)(e.options.source),(0,r.getTypeView)(e._options)),e.circleProgress.stop(),e.playVideo()}.bind(this)),(0,r.delegate)(this.playerElement,"click","btn-cancel-"+this.uniqueId,function(){e.toggleScreen(!1),s.default.sendClickCancelAutonext(e.options.source,(0,r.getTypeView)(e._options)),e.circleProgress.stop(),e.recommendationHandler.updateSeenVideos(e.nextVideo.video.id),e.updatePlugin().then((function(){return e.cancelScreen.open(e.options.source)}))}.bind(this))}},{key:"bindEvents",value:function(){this.listenTo(this.core.mediaControl,p.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged)}},{key:"onContainerChanged",value:function(){if(this.container){this.stopListening(this.container);var e=this.container.playback;e&&this.stopListening(e)}this.container=this.core.getCurrentContainer(),this.listenToOnce(this.container.playback,p.PLAYBACK_PLAY,this.onPlay),this.listenTo(this.container,WP3.Events.WATCH_SESSION_END,this.onEnded),this.listenTo(this.container,p.CONTAINER_DESTROYED,this.onDestroy)}},{key:"onDestroy",value:function(){this.circleProgress&&this.circleProgress.stop()}},{key:"getVideoAlternativeData",value:function(e){var t=e._experiment_properties,n=t.experiment,i=t.alternative,r=t.trackId,a=e.id,s=v[a];return s||(s=new o.default(n),v[a]=s),{abClient:s,alternative:i,testId:r}}},{key:"buildAndSendVideoConversion",value:function(e){if(e){var t=this.getVideoAlternativeData(e),n=t.abClient,i=t.alternative,r=t.testId,o=e.content.video.url;n.sendConversion(i,r,o)}}},{key:"buildAndSendVideoImpression",value:function(e){if(e){var t=this.getVideoAlternativeData(e),n=t.alternative,i=t.testId,r=t.abClient,o=this.playback.video.urlForConsumption;r.sendImpression(n,i,o)}}},{key:"onPlay",value:function(){var e=this;if(this.recommendationHandler.updateSeenVideos(this.playback.video.id),this.videos){var t=this.videos.filter((function(t){return t.content.video.id===e.playback.video.id}))[0];this.buildAndSendVideoConversion(t)}this.updatePlugin(!0).catch((function(){}))}},{key:"playVideo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.nextVideo.video.id,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.nextVideo.title;this.toggleScreen(!1),this.updateTitleElement(t),this.core.load(e),this.playback.play(),this.updatePlugin().catch((function(){}))}},{key:"replayVideo",value:function(){this.playback.play()}},{key:"onEnded",value:function(){var e=this;this.videos?(this.toggleScreen(!0),this.buildAndSendVideoImpression(this.videos[0]),this.circleProgress.start().then((function(){e.circleProgress.stop(),e.playVideo(),s.default.sendStartAutonext(e.nextVideo.video.id,(0,r.getVolumeOfElementBsPlayer)(e.options.source),(0,r.getTypeView)(e._options))})),this.recommendationHandler.updateSeenVideos(this.nextVideo.video.id)):this.removePlugin()}},{key:"updatePlugin",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return this.playerElement.classList.add("video-rec-after-end--enabled"),this.toggleScreen(!1),t?this.recommendationHandler.getVideos().then((function(t){t?(e.videos=t,e.cancelScreen.updateVideos(t),e.updateElement()):e.removePlugin()})).catch((function(){return e.removePlugin()})):Promise.resolve()}},{key:"updateElement",value:function(){this.pluginElementBackground.style="background-image: url('"+this.nextVideo.image.sizes.M.url+"')",this.pluginElementTitle.textContent=this.nextVideo.title}},{key:"updateTitleElement",value:function(e){this.titleElement&&(this.titleElement.textContent=e)}},{key:"template",value:function(){return'\n      <div data-track-category="'+s.default.CATEGORY+'"\n        class="video-rec-after-end__screen video-rec-after-end__screen--next-video" style="background-image: url(\'\')">\n        <div class="video-rec-after-end__content">\n          <span class="video-rec-after-end__screen__chapeu">Assista ao próximo</span>\n          <span class="video-rec-after-end__screen__title"></span>\n          <div\n            data-track-action="next-video"\n            data-track-label="click"\n            class="video-rec-after-end__screen__canvas canvas-'+this.uniqueId+'"\n          >\n            <canvas id="canvas-'+this.uniqueId+'"></canvas>\n            <svg class="video-rec-after-end__screen__canvas__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g fill="none" fill-rule="evenodd">\n              <path d="M0 0h24v24H0z"></path>\n              <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path>\n            </g></svg>\n          </div>\n          <button\n            data-track-action="cancel-video"\n            data-track-label="click"\n            type="button"\n            class="video-rec-after-end__screen__btn-cancel btn-cancel-'+this.uniqueId+'">\n            Cancelar\n          </button>\n        </div>\n      </div>\n    '}},{key:"toggleScreen",value:function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.playerElement.classList.toggle("video-rec-after-end--show",e)}},{key:"addCloseToGlobal",value:function(){window.disableRecScreen=this.disableRecScreen.bind(this)}},{key:"disableRecScreen",value:function(){(0,r.logging)("warn","Disabling Rec Screen due to external demand"),this.playerElement.classList.remove("video-rec-after-end--enabled"),this.cancelScreen.close()}},{key:"removePlugin",value:function(){(0,r.logging)("warn","Desabilitando plugin."),this.playerElement.classList.remove("video-rec-after-end--enabled"),this.destroy()}}]),t}();t.default=h,e.exports=t.default},function(e,t,n){var i=n(6);"string"==typeof i&&(i=[[e.i,i,""]]);n(8)(i,{hmr:!0,transform:void 0}),i.locals&&(e.exports=i.locals)},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,'.clappr-player.video-rec-cancel-screen--enabled .poster{-webkit-filter:blur(10px);filter:blur(10px);-webkit-transform:scale(1.1);-ms-transform:scale(1.1);transform:scale(1.1);position:static!important}.clappr-player:not(.clappr-detach--is-detached) .video-rec-cancel-screen__close-button{display:none!important}.clappr-player.clappr-detach--is-detached .video-rec-cancel-screen{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}.clappr-player.clappr-detach--is-detached .video-rec-cancel-screen__header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:100%;margin-top:12px!important}.clappr-player.clappr-detach--is-detached .video-rec-cancel-screen__header>button{-ms-flex-item-align:end;align-self:flex-end;margin-top:-25px!important;padding:0;margin-right:5px!important}.clappr-player.clappr-detach--is-detached .video-rec-cancel-screen__close-button{width:20px!important;height:20px!important;pointer-events:auto}@media screen and (min-width:620px){.clappr-player.clappr-detach--is-detached .video-rec-cancel-screen__close-button{width:24px!important;height:24px!important}}.clappr-player.clappr-detach--is-detached .video-rec-cancel-screen__close-button>svg{background-color:rgba(0,0,0,.5);border-radius:4px;vertical-align:middle}.video-rec-cancel-screen{width:100%;height:100%;position:absolute;display:none!important;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default}.video-rec-cancel-screen--active{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-cancel-screen__title{font-size:14px!important;font-family:opensans-regular!important}@media screen and (min-width:620px){.video-rec-cancel-screen__title{font-size:20px!important;margin-top:5px!important}}.video-rec-cancel-screen__replay{display:-webkit-box;display:-ms-flexbox;display:flex;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:1002;color:#fff;fill:#fff;background-color:transparent;border:0;margin:18px auto 0;padding:8px;outline:0;cursor:pointer}@media screen and (min-width:620px){.video-rec-cancel-screen__replay{margin-top:35px;font:normal 16px/18px opensans-regular!important}}.video-rec-cancel-screen__replay svg{margin-right:6px}.video-rec-cancel-screen__video-list{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:15px!important}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list{max-width:80%;margin-top:25px!important}}.video-rec-cancel-screen__video-list section{-webkit-box-flex:1;-ms-flex:1;flex:1;margin:0 15px!important;display:none!important;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;cursor:pointer}.video-rec-cancel-screen__video-list section:first-child{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section{display:block!important;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.video-rec-cancel-screen__video-list section:first-child{display:block!important}}.video-rec-cancel-screen__video-list section .thumb-container{max-width:35%;height:auto;position:relative;background-color:#333}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container{max-width:100%}.video-rec-cancel-screen__video-list section .thumb-container__picture{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}.video-rec-cancel-screen__video-list section .thumb-container picture img{width:100%}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .thumb-container picture img{max-width:100%;height:auto}}.video-rec-cancel-screen__video-list section .thumb-container__duration{right:0;position:absolute;bottom:0;background-color:#000;font-size:12px!important;font-family:opensans-regular!important;padding:2px 5px!important}.video-rec-cancel-screen__video-list section .thumb-container__play{top:30%;left:37%;max-width:25%;position:absolute}.video-rec-cancel-screen__video-list section .info-container{width:100%;text-align:left;font:normal 14px/18px opensans-bold!important;margin-left:10px!important;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container{display:block;margin-left:0!important}}.video-rec-cancel-screen__video-list section .info-container__chapeu{display:block;font-family:opensans-regular!important;font-weight:600;-webkit-line-clamp:1;display:-webkit-box;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__chapeu{margin-top:10px!important;font-size:14px!important}}.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:2;display:-webkit-box;overflow:hidden;-webkit-box-orient:vertical}@media screen and (min-width:620px){.video-rec-cancel-screen__video-list section .info-container__title{-webkit-line-clamp:3;margin-top:4px!important;font-size:16px!important;line-height:20px!important}}.clappr-player.video-rec-after-end--enabled .poster__play-wrapper{visibility:hidden!important}.video-rec-after-end{display:none!important;width:100%;height:100%;position:absolute;z-index:1000;background-color:#333}.video-rec-after-end #canvas{width:100%;height:auto}.video-rec-after-end__content{max-width:72%;z-index:1002}.video-rec-after-end__screen{width:100%;height:100%;position:absolute;z-index:1000;background-color:transparent;background-position:0 0;background-repeat:no-repeat;background-size:cover;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;color:#fff;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer}.video-rec-after-end__screen--next-video{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end__screen--next-video:after{content:"";width:100%;height:100%;position:absolute;top:0;left:0;z-index:1001;background-color:#000;opacity:.6}.video-rec-after-end__screen__chapeu{display:block;font:normal 14px/19px opensans-regular!important;letter-spacing:-.3px;text-align:center}@media screen and (min-width:620px){.video-rec-after-end__screen__chapeu{font:normal 18px/18px opensans-regular!important}}.video-rec-after-end__screen__title{display:block;font:normal 4.5vw/5.5vw opensans-bold!important;letter-spacing:-.3px;text-align:center;margin-top:2px!important;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}@media screen and (min-width:620px){.video-rec-after-end__screen__title{font-size:20px!important;line-height:24px!important;margin-top:8px!important;display:block}}.video-rec-after-end__screen__canvas{position:relative;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;margin-top:10px!important;-webkit-transform:scale(.5);-ms-transform:scale(.5);transform:scale(.5);height:12vw}@media screen and (min-width:620px){.video-rec-after-end__screen__canvas{margin-top:30px!important;-webkit-transform:none;-ms-transform:none;transform:none;height:auto;height:70px}}.video-rec-after-end__screen__canvas__play{max-width:40px;position:absolute}.video-rec-after-end__screen__btn-cancel{display:block;font:normal 14px/18px opensans-regular!important;letter-spacing:-.3px;text-align:center;z-index:1002;color:#fff;background-color:transparent;border:0;margin:10px auto 0;cursor:pointer;position:relative;z-index:2}@media screen and (min-width:620px){.video-rec-after-end__screen__btn-cancel{font:normal 16px/18px opensans-regular!important;margin:28px auto 0}}.video-rec-after-end__screen__btn-cancel:active{outline:0}.video-rec-after-end--show .video-rec-after-end{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important}.video-rec-after-end--show .media-control{display:none}',""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,i=e[1]||"",r=e[3];if(!r)return i;if(t&&"function"==typeof btoa){var o=(n=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=r.sources.map((function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"}));return[i].concat(a).concat([o]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t,n){var i,r,o,a={},s=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),c=(o={},function(e){if(void 0===o[e]){var t=function(e){return document.querySelector(e)}.call(this,e);if(t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}o[e]=t}return o[e]}),l=null,u=0,d=[],p=n(9);function f(e,t){for(var n=0;n<e.length;n++){var i=e[n],r=a[i.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](i.parts[o]);for(;o<i.parts.length;o++)r.parts.push(g(i.parts[o],t))}else{var s=[];for(o=0;o<i.parts.length;o++)s.push(g(i.parts[o],t));a[i.id]={id:i.id,refs:1,parts:s}}}}function v(e,t){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};i[a]?i[a].parts.push(s):n.push(i[a]={id:a,parts:[s]})}return n}function h(e,t){var n=c(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=d[d.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),d.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=c(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function m(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=d.indexOf(e);0<=t&&d.splice(t,1)}function b(e){var t=document.createElement("style");return e.attrs.type="text/css",y(t,e.attrs),h(e,t),t}function y(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function g(e,t){var n,i,r,o,a,s;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var c=u++;n=l||(l=b(t)),i=_.bind(null,n,c,!1),r=_.bind(null,n,c,!0)}else r=e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=t,s=document.createElement("link"),a.attrs.type="text/css",a.attrs.rel="stylesheet",y(s,a.attrs),h(a,s),i=function(e,t,n){var i=n.css,r=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||o)&&(i=p(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,n=s,t),function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=b(t),i=function(e,t){var n=t.css,i=t.media;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}.bind(null,n),function(){m(n)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=v(e,t);return f(n,t),function(e){for(var i=[],r=0;r<n.length;r++){var o=n[r];(s=a[o.id]).refs--,i.push(s)}for(e&&f(v(e,t),t),r=0;r<i.length;r++){var s;if(0===(s=i[r]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete a[s.id]}}}};var x,w=(x=[],function(e,t){return x[e]=t,x.filter(Boolean).join("\n")});function _(e,t,n,i){var r=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t,n){"use strict";e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,i=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,o=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?e:(r=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:i+o.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=new(((i=n(11))&&i.__esModule?i:{default:i}).default)(o.env),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._interactionsSent=[],this.experimentName=t}return r(e,[{key:"_sendCustom",value:function(e,t,n,i){return(0,o.logging)("log","Enviando "+e+" para o experimento "+this.experimentName+" para alternativa "+t,"com testId "+n+" e originURL "+i),a[e]({experiment:this.experimentName,alternative:t,testId:n},a.options().withOriginURL(i))}},{key:"send",value:function(e){try{for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._sendCustom.apply(this,[e].concat(n))}catch(t){(0,o.logging)("error","Falha ao enviar "+e+" para teste AB: "+this.experimentName+"."),(0,o.logging)("error",t)}}},{key:"sendImpression",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.send.apply(this,["impression"].concat(t))}},{key:"sendConversion",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.send.apply(this,["conversion"].concat(t))}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";(function(e){var n,i,r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(9),o=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t}return i(e,[{key:"getParams",value:function(e){var t={skipImpressions:this.isSkippedImpression()};return Object.assign({},t,e)}},{key:"getLocationParams",value:function(){return{drawed:!0,countImpressions:!this.isSkippedImpression()}}},{key:"getHeaders",value:function(){return this.options.extraHeaders||[]}},{key:"getHeader",value:function(e){var t="";return this.getHeaders().forEach((function(n){Object.keys(n).forEach((function(i){e===i&&(t=n[i])}))})),t}},{key:"getDict",value:function(){return this.options}},{key:"getTimeout",value:function(){var e=this.options.timeout;return void 0===e&&(e=1e3),e}},{key:"skipImpression",value:function(){return this.options.skipImpressions=!0,this}},{key:"timeout",value:function(e){return this.options.timeout=e,this}},{key:"isFieldSetted",value:function(e){return void 0!==e&&!1!==e}},{key:"isSkippedImpression",value:function(){return this.isFieldSetted(this.options.skipImpressions)}},{key:"addHeader",value:function(e){var t=[];return this.options.hasOwnProperty("extraHeaders")&&(t=this.options.extraHeaders),t.push(e),this.options.extraHeaders=t,this}},{key:"withOriginURL",value:function(t){return new e(this.clone(this.options)).originURL(t)}},{key:"originURL",value:function(e){return this.addHeader({"x-canonical-uri":e}),this}},{key:"getOriginURL",value:function(){return this.getHeader("x-canonical-uri")}},{key:"enableGADebugger",value:function(){return this.options.enableGADebugger=!0,this}},{key:"isEnabledGADebugger",value:function(){return this.isFieldSetted(this.options.enableGADebugger)}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}},{key:"withContext",value:function(e){return this.options.context=r.validated(e),this}},{key:"getContext",value:function(){return this.options.context?this.options.context:[]}}],[{key:"validated",value:function(t){if(t instanceof e)return t;if(void 0===t)return new e;throw new TypeError("GloboABOptions não válido")}}]),e}();e.exports=o},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(10),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t}return i(e,[{key:"oneWaySend",value:function(e,t,n,i){this.do("PUT",e,null,t,null,null,n,i)}},{key:"do",value:function(e,t,n,i,o,a){var s=this,c=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],l=7<arguments.length&&void 0!==arguments[7]?arguments[7]:1e3,u="",d=r.interceptParams(t,n);for(var p in d)d.hasOwnProperty(p)&&(u+="&"+p+"="+d[p]);u&&(u="?"+u.substring(1));var f=this.abHost+t+u,v=this.createXHR();v.open(e,f,!0),v.timeout=l,v.onload=function(){200<=v.status&&v.status<400?s.callIfDefined(o,v):s.callIfDefined(a,s.handleError(v,f))},v.onerror=function(e){s.callIfDefined(a,s.handleError(e,f))},v.ontimeout=function(e){s.callIfDefined(a,s.handleError(e,f))},i&&(v.setRequestHeader("Content-Type","application/json;charset=utf-8"),i=JSON.stringify(i)),Array.from(c).forEach((function(e){Object.keys(e).forEach((function(t){v.setRequestHeader(t,e[t])}))})),v.send(i)}},{key:"handleError",value:function(e,t){var n={};return n.type=e.type?e.type:"undefined",e.target instanceof XMLHttpRequest&&(e=e.target),e instanceof XMLHttpRequest?(n.status=e.status,n.url=t,n.timeout=e.timeout,n.msg=e.responseText):n.msg=e.toString(),n}},{key:"createXHR",value:function(){var e=new XMLHttpRequest;return e.withCredentials=!0,e}},{key:"callIfDefined",value:function(e,t){e&&e(t)}}]),e}();e.exports=o},function(e,t,n){var i,r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}e.exports=i},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),o=n(16),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t,this.request=new r(this.abHost),this.requestWrapper=new o(this.abHost)}return i(e,[{key:"selectedAlternatives",value:function(e,t,n,i){this.request.do("GET","/v2/selected-alternatives",t.getParams({experiments:e}),null,n,i,t.getHeaders(),t.getTimeout())}},{key:"chooseWithContext",value:function(e,t,n,i){var r=t.getParams({experiments:[e]});this.request.do("POST","/choose",{},Object.assign(r,{context:t.getContext()}),n,i,t.getHeaders(),t.getTimeout())}},{key:"recordMetric",value:function(e,t,n){var i="/v2/tests/"+t.testId+"/"+e,r={experiment:t.experiment,alternative:t.alternative,context:n.getContext()};this.requestWrapper.oneWay(i,r,n.getHeaders(),n.getTimeout())}}]),e}();e.exports=a},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=function(){function e(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t||{},this.context=n,this.options=i,this.experiment=this._getStringFromData("experiment"),this.alternative=this._getStringFromData("alternative"),this.testId=this._getStringFromData("testId"),this.properties=this._getPropertiesFromData()}return i(e,[{key:"isValid",value:function(){return"string"==typeof this.experiment&&""!==this.experiment.trim()&&"string"==typeof this.alternative&&""!==this.alternative.trim()&&"string"==typeof this.testId&&""!==this.testId.trim()}},{key:"impression",value:function(e){if(this.isValid()){var t=e||this.options;this._sendMetric("impression",t)}else console.warn("Os dados do exp não são válidos para impressão")}},{key:"conversion",value:function(e){if(this.isValid()){var t=e||this.options;this._sendMetric("conversion",t)}else console.warn("Os dados do exp não são válidos para conversão!")}},{key:"_canProcessEvent",value:function(){return!(this.data&&this.data["extra-info"]&&this.data["extra-info"]["draw-rule"]&&void 0!==this.data["extra-info"]["draw-rule"]["process-event"])||this.data["extra-info"]["draw-rule"]["process-event"]}},{key:"_sendMetric",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options;if(this._canProcessEvent()){var n={experiment:this.experiment,alternative:this.alternative,testId:this.testId};this.context.abEndpoint.recordMetric(e,n,t)}else console.warn("Nao será enviado sinais de impressão ou conversão, uma vez que o experimento foi finalizado ou desativado.")}},{key:"_getPropertiesFromData",value:function(){var e={};return(Array.isArray(this.data.properties)?this.data.properties:[]).forEach((function(t){var n=t.key,i=t.value;e[n]=i})),e}},{key:"_getStringFromData",value:function(e){return"string"==typeof this.data[e]?this.data[e]:null}}],[{key:"parseRequest",value:function(t,n,i){var r=JSON.parse(t),o={};for(var a in r.experiments)if(r.experiments.hasOwnProperty(a)){var s=new e(r.experiments[a],n,i);o[a]=s}return o}}]),e}();e.exports=o},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=n(3),a=n(4),s=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server=t,this.abEndpoint=new o(this.server),this._options=n}return i(e,[{key:"options",value:function(){return this._options}},{key:"impression",value:function(e,t){this._getExperiment(e,t).impression()}},{key:"conversion",value:function(e,t){this._getExperiment(e,t).conversion()}},{key:"choose",value:function(e){return"string"==typeof e&&""!==e.trim()?this._chooseOne(e):Array.isArray(e)&&0<e.length?this._chooseMulti(e):Promise.reject(new TypeError("Para sorteio o experimento precisa ser uma string ou uma lista válida."))}},{key:"_chooseOne",value:function(e){var t=this;return 0<this._options.getContext().length?new Promise((function(n,i){t.abEndpoint.chooseWithContext(e,t.options(),(function(i){var r=a.parseRequest(i.responseText,t,t.options())[e];n(r)}),(function(e){i(e)}))})):new Promise((function(n,i){t.abEndpoint.selectedAlternatives(e,t.options(),(function(i){var r=a.parseRequest(i.responseText,t,t.options())[e];n(r)}),(function(e){i(e)}))}))}},{key:"_chooseMulti",value:function(e){var t=this,n=e.join(",");return new Promise((function(e,i){t.abEndpoint.selectedAlternatives(n,t.options(),(function(n){var i=a.parseRequest(n.responseText,t,t.options());e(i)}),(function(e){i(e)}))}))}},{key:"_getExperiment",value:function(e,t){var n=t||this._options;return void 0!==e&&e.__proto__&&e.__proto__.constructor&&"Experiment"===e.__proto__.constructor.name?(e.options=n,e):new a(e,this,n)}}]),e}();e.exports=s},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(12),o=n(11),a=n(0),s=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server=t,this.abEndpoint=new o(this.server),this._options=n}return i(e,[{key:"options",value:function(){return this._options}},{key:"choose",value:function(e){var t=this;return 0<this.options().getContext().length?new Promise((function(n,i){t.abEndpoint.chooseLocationWithContext(e,t.options(),(function(e){var i=r.parseRequest(e.responseText,t,t.options());n(i)}),(function(e){i(e)}))})):new Promise((function(n,i){t.abEndpoint.selectedDrawedExperiment(e,t.options(),(function(e){var i=r.parseRequest(e.responseText,t,t.options());n(i)}),(function(e){i(e)}))}))}}]),e}();e.exports=s},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=n(13),a=n(14),s=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.server=t,this._options=n,this.mabEndpoint=new o(this.server)}return i(e,[{key:"options",value:function(){return this._options}},{key:"increment",value:function(e){var t=e.experiment,n=e.arm,i=e.testId,r=e.abAlternative,o=e.arms;new a({experiment:t,arm:n,testId:i,abAlternative:r,arms:void 0===o?[]:o},this,this.options()).increment()}},{key:"reward",value:function(e){var t=e.experiment,n=e.arm,i=e.testId,r=e.abAlternative,o=e.slot,s=void 0===o?0:o;new a({experiment:t,arm:n,testId:i,abAlternative:r},this,this.options()).reward(s,n)}},{key:"choose",value:function(e){return"string"==typeof e&&""!==e.trim()?this._chooseOne(e):Array.isArray(e)&&0<e.length?this._chooseMulti(e):Promise.reject(new TypeError("Para sorteio o experimento precisa ser uma string ou uma lista válida."))}},{key:"_chooseOne",value:function(e){var t=this;return new Promise((function(n,i){t.mabEndpoint.getSelectedArm(e,t.options(),(function(i){var r=a.parseRequest(i.responseText,e,t,t.options());n(r)}),(function(e){i(e)}))}))}},{key:"_chooseMulti",value:function(e){var t=this,n=e.join(",");return new Promise((function(e,i){t.mabEndpoint.getSelectedArms(n,t.options(),(function(n){var i=a.parseRequestWithQueryString(n.responseText,t,t.options());e(i)}),(function(e){i(e)}))}))}}]),e}();e.exports=s},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=n(5),a=n(7),s=n(6),c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.env=this._getEnv(t),this._options=new r,this.abMain=new o(this._getServer(this.env),this._options)}return i(e,[{key:"createOptions",value:function(){return this._options=new r,this.abMain=new o(this._getServer(this.env),this._options),this._options}},{key:"options",value:function(){return this._options}},{key:"mab",value:function(){return new a(this._getMabServer(this.env),this.options())}},{key:"location",value:function(){return new s(this._getServer(this.env),this.options(),this.context)}},{key:"impression",value:function(e,t){this.abMain.impression(e,t)}},{key:"conversion",value:function(e,t){this.abMain.conversion(e,t)}},{key:"choose",value:function(e){return this.abMain.choose(e)}},{key:"_getEnv",value:function(e){return"prod"===e||"prod.be"===e||"qa"===e||"qa.be"===e||"local"===e?e:"qa"}},{key:"_getServer",value:function(e){return"local"===this.env?"http://localhost:8888":"prod"===this.env?"https://globo-ab.globo.com":"prod.be"===this.env?"http://be.globo-ab.globoi.com":"qa.be"===this.env?"http://be.globo-ab.qa.globoi.com":"https://globo-ab.qa.globoi.com"}},{key:"_getMabServer",value:function(e){return"local"===this.env?"http://localhost:8888":"prod"===this.env?"https://globo-mab.globo.com":"prod.be"===this.env?"http://be.globo-mab.globoi.com":"qa.be"===this.env?"http://be.globo-mab.qa.globoi.com":"https://globo-mab.qa.globoi.com"}}]),e}();e.exports=c},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t}return i(e,null,[{key:"validated",value:function(e){if(Array.isArray(e)&&this.isValid(e))return e;if(void 0===e)return[];throw new TypeError("Contexto não válido")}},{key:"isValid",value:function(e){for(var t=!0,n=0;n<e.length;n++)t=t&&"string"==typeof e[n].name&&"string"==typeof e[n].value;return t}}]),e}();e.exports=r},function(e,t,n){(function(t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getPluginParams",value:function(){var t={},n=["ab-client-context","ab-client-experiment","ab-client-alternative"],i=e.getDocumentLocationSearch().substr(1).split("&");for(var r in i)if(i.hasOwnProperty(r)){var o=i[r].split("=");-1<n.indexOf(o[0])&&(t[o[0]]=o[1])}return t}},{key:"getDocumentLocationSearch",value:function(){return document.location.search}},{key:"isCompatibleWithPlugin",value:function(){return void 0!==t.window}},{key:"interceptParams",value:function(t,n){try{if(e.isCompatibleWithPlugin()&&t){var i=void 0,r=void 0;if(-1<t.indexOf("/location/")){var o=t.split("/");i=o[o.length-1]}else-1<t.indexOf("selected-alternatives")&&(r=n.experiments||n.experiment);if(r||i)return Object.assign({},n,this.getExperimentSettings(i,r))}}catch(t){console.error(t)}return n}},{key:"getExperimentSettings",value:function(e,t){var n=this.getPluginParams();if(e&&n["ab-client-context"]===e&&n["ab-client-experiment"]){var i={experiment:n["ab-client-experiment"],alternative:n["ab-client-alternative"]};return i.alternative||delete i.alternative,i}return t&&t.includes(n["ab-client-experiment"])&&n["ab-client-alternative"]?{alternative:n["ab-client-alternative"]}:{}}}]),e}();e.exports=i}).call(t,n(2))},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),o=n(3),s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.abHost=e,n.request=new r(n.abHost),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o),i(t,[{key:"selectedDrawedExperiment",value:function(e,t,n,i){this.request.do("GET","/ab/location/"+e,t.getLocationParams(),null,n,i)}},{key:"chooseLocationWithContext",value:function(e,t,n,i){this.request.do("POST","/location/"+e+"/choose",{},Object.assign(t.getLocationParams(),{context:t.getContext()}),n,i)}}]),t}();e.exports=s},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(4),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"parseRequest",value:function(e,t,n){var i=JSON.parse(e),o=Object.keys(i)[0],a=i[o],s=a.alternative,c=a.testId;return new r({experiment:o,alternative:s,testId:c},t,n)}}]),e}();e.exports=o},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(1),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t,this.request=new r(this.abHost)}return i(e,[{key:"getSelectedArm",value:function(e,t,n,i){var r="",o="GET";t.isSkippedImpression()?r="/mab/"+e+"/choose":(r="/mab/"+e+"/chooseAndIncrement",o="POST"),this.request.do(o,r,null,null,n,i,t.getHeaders(),t.getTimeout())}},{key:"getSelectedArms",value:function(e,t,n,i){var r;r=t.isSkippedImpression()?"/choose":"/chooseAndIncrement",this.request.do("GET",r,t.getParams({experiments:e}),null,n,i,t.getHeaders(),t.getTimeout())}},{key:"recordMABMetric",value:function(e,t,n){var i="/mab/"+t.experiment+"/"+e,r=t.arms?t.arms:[],o={arm:t.arm,testId:t.testId,abAlternative:t.abAlternative,arms:r};this.request.do("POST",i,{},o,null,null,n.getHeaders(),n.getTimeout())}}]),e}();e.exports=o},function(e,t,n){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),o=function(){function e(t,n){var i=t.experiment,o=t.arm,a=t.testId,s=t.abAlternative,c=t.arms,l=void 0===c?[]:c,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:new r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.experiment=i,this.arm=o,this.testId=a,this.abAlternative=s,this.arms=l,this.context=n,this.options=u}return i(e,[{key:"increment",value:function(){var e=this.arms;0===e.length&&(e=[{slot:0,name:this.arm}]),this._sendMetric("increment",e)}},{key:"reward",value:function(){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",t=[{slot:0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,name:""===e?this.arm:e}];this._sendMetric("reward",t)}},{key:"_sendMetric",value:function(e,t){var n={experiment:this.experiment,arm:this.arm,testId:this.testId,abAlternative:this.abAlternative,arms:t};this._recordMetric(e,n)}},{key:"_recordMetric",value:function(e,t){this.context.mabEndpoint.recordMABMetric(e,t,this.options)}}],[{key:"parseRequest",value:function(t,n,i,r){var o=JSON.parse(t);return o.experiment=n,new e(o,i,r)}},{key:"parseRequestWithQueryString",value:function(t,n,i){var r=JSON.parse(t),o={};for(var a in r)if(r.hasOwnProperty(a)){r[a].experiment=a;var s=new e(r[a],n,i);o[a]=s}return o}}]),e}();e.exports=o},function(e,t,n){(function(t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.abHost=t}return n(e,[{key:"send",value:function(e,n){t.navigator.sendBeacon(this.abHost+e,JSON.stringify(n))}}]),e}();e.exports=i}).call(t,n(2))},function(e,t,n){(function(t){var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(15),o=n(1),a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.host=t,this.sendBeaconOneWay=new r(this.host),this.xmlHttp=new o(this.host)}return i(e,[{key:"oneWay",value:function(e,t,n,i){this.isBrowserSupportSendBeacon()&&!this.hasHeaders(n)?this.sendBeaconOneWay.send(e,t):this.xmlHttp.oneWaySend(e,t,n,i)}},{key:"isBrowserSupportSendBeacon",value:function(){return!(void 0===t.navigator||!t.navigator.sendBeacon)}},{key:"hasHeaders",value:function(e){return void 0!==e&&0<e.length}}]),e}();e.exports=a}).call(t,n(2))}])},"object"===a(t)&&"object"===a(e)?e.exports=o():(i=[],void 0===(r="function"==typeof(n=o)?n.apply(t,i):n)||(e.exports=r))}).call(this,n(12)(e))},function(e,t,n){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=n(1))&&i.__esModule?i:{default:i},s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uniqueId=n,this.playerElement=t,this.videoIds=[],this.volume=0,this.element=(0,o.createElement)("video-rec-cancel-screen"),this.element.innerHTML=this.template(),this.playerElement.appendChild(this.element),this.listElement=this.element.getElementsByClassName("video-rec-cancel-screen__video-list")[0],this.replayCallback=function(){},this.clickCallback=function(e){return e},(0,o.delegate)(this.playerElement,"click","replay-"+this.uniqueId,this.handleReplay.bind(this)),(0,o.delegate)(this.playerElement,"click","video-"+this.uniqueId,this.handleClick.bind(this)),(0,o.delegate)(this.playerElement,"click","close-"+this.uniqueId,this.handleClose.bind(this))}return r(e,[{key:"open",value:function(e){this.playerElement.classList.add("video-rec-cancel-screen--enabled"),this.element.classList.add("video-rec-cancel-screen--active"),a.default.sendRecommendationScreenImpression(this.videoIds,e)}},{key:"close",value:function(){this.playerElement.classList.remove("video-rec-cancel-screen--enabled"),this.element.classList.remove("video-rec-cancel-screen--active")}},{key:"closeButton",value:function(){WM.PlayerManager.map((function(e){e.configure({isDetached:!1})}))}},{key:"updateVideos",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.videoIds=e.map((function(e){return e.content.video.id})),this.listElement.innerHTML=e.map(this.renderVideo.bind(this)).join("")}},{key:"onReplay",value:function(e){this.replayCallback=e}},{key:"onClick",value:function(e){this.clickCallback=e}},{key:"handleReplay",value:function(){this.close(),this.replayCallback()}},{key:"handleClose",value:function(){this.closeButton()}},{key:"handleClick",value:function(e){var t=parseInt(e.getAttribute("data-index"),10)+1,n=parseInt(e.getAttribute("data-video-id")),i=e.getAttribute("data-video-title");this.clickCallback(n,i),this.close(),a.default.sendRecommendationClick(t,n,this.playerElement.parentElement.WMPlayer.container.volume)}},{key:"renderVideo",value:function(e,t){return'\n      <section data-index="'+t+'" class="video-'+this.uniqueId+'"\n      data-video-id="'+e.content.video.id+'"\n      data-video-title="'+e.content.title+'">\n        <div class="thumb-container">\n          <picture class="thumb-container__picture">\n            <source media="(min-width: 620px)" srcset="'+e.content.image.sizes.S.url+'">\n            <img src="'+e.content.image.sizes.S.url+'" />\n          </picture>\n          <span class="thumb-container__duration">'+(0,o.parseMilliseconds)(e.content.video.duration)+'</span>\n          <svg class="thumb-container__play" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n            <g fill="none" fill-rule="evenodd">\n              <path d="M0 0h24v24H0z"></path>\n              <path d="M8 6.267c0-.661.468-.931 1.04-.601l9.93 5.733c.573.33.573.871 0 1.202l-9.93 5.733c-.572.33-1.04.06-1.04-.6V6.266z" fill="#FFF"></path>\n            </g>\n          </svg>\n        </div>\n        <div class="info-container">\n          <span class="info-container__chapeu">'+e.content.section+'</span>\n          <span class="info-container__title">'+e.content.title+"<span>\n        </div>\n      </section>\n    "}},{key:"template",value:function(){return'\n      <div class="video-rec-cancel-screen__header">\n        <span class="video-rec-cancel-screen__title">Assista também</span>\n        <button class="video-rec-cancel-screen__close-button close-'+this.uniqueId+' media-control-button">\n          <svg fill="#FFF" viewBox="0 0 24 24" >\n            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />\n          </svg>\n        </button>\n      </div>\n      <div class="video-rec-cancel-screen__video-list"></div>\n      <button class="video-rec-cancel-screen__replay replay-'+this.uniqueId+'" type="button">\n        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 22 22">\n          <path d="M0 0h24v24H0z" fill="none"/>\n          <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>\n        </svg>\n        Reveja\n      </button>\n    '}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=null}return i(e,[{key:"setHorizonClient",value:function(){var e=this;setTimeout((function(){if(window.HorizonClient)return window.HorizonClient.then((function(t){return e.client=t}));e.setHorizonClient()}),100)}},{key:"send",value:function(e){this.client&&this.client.send(Object.assign(e))}},{key:"commonEvent",value:function(e){var t=e.eventCategory,n=e.eventAction,i=e.eventLabel,r=e.eventValue,o=e.eventProperty;this.send({id:"common-event",version:"0.1",contentType:"common",properties:{eventCategory:t,eventAction:n,eventLabel:i,eventValue:r,eventProperty:o}})}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(2),o=n(0),a=function(){function e(t){var n=t.endpoint,i=t.videoId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endpoint=n,this.endpointData=[],this.currentConfig={},this.onErrorCallback=function(){},this.videoId=i}return i(e,[{key:"_getEndpoint",value:function(){var e=this.endpoint+"?registerImpression=false";return this.videoId&&(e+="&documentKey=video:"+this.videoId),Promise.resolve(e)}},{key:"_requestData",value:function(){var e=this;return this._getEndpoint().then((function(t){return(0,o.ajax)({url:t}).catch((function(e){return(0,o.logging)("error","Falha ao requisitar vídeos recomendados."),Promise.reject(e)})).then((function(t){return e.endpointData=JSON.parse(t),Promise.resolve(e.endpointData)}))}))}},{key:"_getSessionStorage",value:function(e){if(window.sessionStorage){var t=window.sessionStorage.getItem(r.PLUGIN_KEYNAME+"--"+e);if(!t)return null;try{return JSON.parse(t)}catch(e){return{error:e}}}}},{key:"_setSessionStorage",value:function(e,t){if(window.sessionStorage){var n="string"==typeof e?e:JSON.stringify(e);return window.sessionStorage.setItem(r.PLUGIN_KEYNAME+"--"+t,n),e}}},{key:"_filterSeenVideos",value:function(e){var t=this.getSeenVideos();return t.length<=0?e:e.filter((function(e){return t.indexOf(e.content.video.id)<0}))}},{key:"onError",value:function(e){"function"==typeof e&&(this.onErrorCallback=e)}},{key:"getSeenVideos",value:function(){return this._getSessionStorage(r.SEEN_VIDEOS_STORAGE_KEY)||[]}},{key:"getVideos",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;return this._requestData().then((function(t){return e._filterSeenVideos(t)})).then((function(e){return e.length>=t?Promise.resolve(e.slice(0,t)):((0,o.logging)("warn","Todos os vídeos foram vistos."),Promise.reject())})).catch((function(t){return t instanceof Error&&(0,o.logging)("error",t),Promise.reject(e.onErrorCallback())}))}},{key:"updateSeenVideos",value:function(e){var t=this.getSeenVideos();return e&&t.indexOf(e)<0&&t.push(e),this._setSessionStorage(t,r.SEEN_VIDEOS_STORAGE_KEY)}}]),e}();t.default=a,e.exports=t.default}]);