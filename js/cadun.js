function JsonpService(e){var n=0,t={},o=e+".callbacks",a=function(){};return{jsonp:function(e,i){var r=i.onSuccess||a,u=i.onTimeout||a,d=i.timeout||1e4,c="request_"+n,l=document.getElementsByTagName("head")[0],s=document.createElement("script");n+=1;var m=setTimeout((function(){u()}),d);t[c]=function(e){clearTimeout(m),l.removeChild(s),delete t[c],r(e)},s.type="text/javascript",s.async=!0;var f=o+"."+c;e+=e.indexOf("?")+1?"&":"?",e+="callback="+encodeURIComponent(f),s.src=e,l.appendChild(s)},callbacks:t}}function Util(){function e(e){return unescape(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function n(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}return{getQueryStringByName:n,hasQueryString:function(e){var t=n(e);return null!=t&&!String(t).match(/^\s*$/)},hasCookie:function(n){var t=e(n);return null!=t&&!String(t).match(/^\s*$/)},getCookie:e,setCookie:function(e,n,t,o){t=t||"/",o=o||30,window.document.cookie=e+"="+n+"; max-age="+o+"; path="+t+"; domain="+window.document.domain},getUserAgent:function(){return window.navigator.userAgent},refreshWindow:function(){window.location.href=window.location.href},redirectTo:function(e){window.top.location.href=e},serialize:function(e){var n=[];for(var t in e)e[t]&&n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&")},getParentLocationHost:function(){return window.parent.location.host}}}function CacheService(e){var n=window.localStorage,t=new Util,o=parseInt("10000");function a(e,t,a){a=void 0!==a?a:o;var i={value:t,expireAt:Date.now()+a};n.setItem(e,JSON.stringify(i))}function i(e){var t=n.getItem(e);if(null!=t){var o=JSON.parse(t);if(null!=o){var a=new Date(o.expireAt).getTime();new Date(Date.now()),new Date(a);if(!(a<Date.now()))return o.value;n.removeItem(e)}}}function r(e,n){return e+"|"+n}return{loggedUser:function(e){var n=t.getCookie("GLBID"),o=i(n);return void 0===e||i(r(n,e))?o:void 0},store:function(e,n,o){var i=t.getCookie("GLBID");a(i,e,o),void 0!==n&&a(r(i,n),!0)},clean:function(e){var o=t.getCookie("GLBID");n.removeItem(o),void 0!==e&&n.removeItem(r(o,e))}}}var GloboIDSDK;function EventService(){return{subscribe:function(e,n){if("ready"!==e){"userInfoAvailable"===e&&Cadun.user.me&&n(Cadun.user.me);var t={};t[e]=n,Cadun.Event.cached.push(t)}else n(Cadun)},unsubscribe:function(e,n){for(var t=Cadun.Event.cached||[],o=[],a=!1,i=0;i<t.length;i+=1){var r=t[i];r[e]!==n?o.push(r):a=!0}return a&&Array.prototype.splice.apply(t,[0,t.length].concat(o)),a},trigger:function(){for(var e=Array.prototype.shift.call(arguments),n=Cadun.Event.cached||[],t=0;t<n.length;t+=1){var o=n[t][e];o&&o.apply(null,arguments)}}}}void 0!==window.Cadun&&null!==Cadun||(window.Cadun={},window.Cadun.initialized=!1,Cadun.version="0.9.6",Cadun.service=new JsonpService("Cadun.service"),Cadun.cache=new CacheService("Cadun.cache"),Cadun.util=new Util,Cadun.callback=null,Cadun.isRedirectEnabled=!1,Cadun.closeButtonDisabled=!1,Cadun.closeModalCallback=null,Cadun.serviceId=null,Cadun.Event=new EventService,Cadun.user={me:void 0},Cadun.init=function(){window.Cadun.initialized=!0,function(){Cadun.Event.cached=[],void 0!==window._cdn&&_cdn.length>0&&(Cadun.Event.cached=_cdn,Cadun.Event.trigger("ready",Cadun)),void 0!==window.cq&&cq.length>0&&(Cadun.Event.cached=cq,Cadun.Event.trigger("ready",Cadun));var e=window.addEventListener?"addEventListener":"attachEvent";(0,window[e])("attachEvent"===e?"onmessage":"message",(function(e){Cadun.didLoginFinished(e)&&Cadun.callback&&(Cadun.modal.close(!0),Cadun.authorize(Cadun.serviceId,(function(e){Cadun.user.me=e,null!==e&&null!==e.token&&Cadun.util.setCookie("GLBID",e.token),"function"==typeof Cadun.callback&&(Cadun.callback(e),Cadun.callback=null)})),void 0!==window.glb&&void 0!==window.glb.barra&&glb.barra.component.handleAuthArea(),Cadun.isRedirectEnabled&&Cadun.util.redirectTo(e.data))}),!1)}(),window._cdn={push:function(e){for(var n=Object.keys(e),t=0;t<n.length;t+=1)Cadun.Event.subscribe(n[t],e[n[t]])}},window.cq=_cdn,Cadun.authorize(void 0,(function(e){}))}),Cadun.authorize=function(e,n){var t=Cadun.getLoggedUser(e);if(void 0===t){var o="https://cocoon.globo.com/v2/user/logged"+(void 0===e?"":"?servico_id="+e);Cadun.Request.ajax({method:"POST",url:o,withCredentials:!0,timeout:5e3,success:function(t){t&&t.status&&t.provider&&t.token?Cadun.setLoggedUser(t,e):t=Cadun.unauthorize(),n(t)},error:function(e){e=Cadun.unauthorize(),n(e)}})}else n(t)},Cadun.getLoggedUser=function(e){var n=Cadun.cache.loggedUser(e);return void 0!==n&&void 0===Cadun.user.me&&Cadun.setLoggedUser(n,e),n},Cadun.setLoggedUser=function(e,n){Cadun.user.me=e,Cadun.cache.store(e,n),Cadun.Event.trigger("userInfoAvailable",e)},Cadun.unauthorize=function(){var e={status:"unauthorized"};return Cadun.Event.trigger("userUnauthorized",e),e},Cadun.user.feed=function(e){},Cadun.login=function(e,n,t,o,a,i){Cadun.serviceId=e,Cadun.closeModalCallback=a,GloboIDSDK.isActive()?GloboIDSDK.bindLogin(e).onSuccess((function(e){o(e),t&&Cadun.util.redirectTo(n)})):Cadun.authorize(e,(function(a){if("authorized"!==a.status){var r="?url="+n+"&tam=WIDGET";"object"==typeof i&&"string"==typeof i._ga&&"string"==typeof i.glbProduct&&"string"==typeof i.component&&(r=r+"&_ga="+i._ga+"&glbproduct="+i.glbProduct+"&component="+i.component);var u="https://login.globo.com/login/"+e+r;if(Cadun.needsToOpenInNewWindow())return void Cadun.util.redirectTo(u);Cadun.cache.clean(e),t&&(Cadun.isRedirectEnabled=!0),o&&(Cadun.callback=o),Cadun.modal.open(u)}}))},Cadun.needsToOpenInNewWindow=function(){var e=window.location.host.toLowerCase(),n=e.substring(e.lastIndexOf("globo.com")),t="globo.com"===n||"globoi.com"===n,o=Cadun.util.getUserAgent().toLowerCase();return(-1!==o.indexOf("msie ")||-1!==o.indexOf("trident/")||-1!==o.indexOf("safari")&&-1===o.indexOf("chrome"))&&!t},Cadun.didLoginFinished=function(e){var n=["provisionamento","confirmar-email","recuperacaoSenha","recuperacaoLogin","login"],t=-1!==e.origin.indexOf("login.globo.com");if(String.prototype.startsWith||(String.prototype.startsWith=function(e,n){return n=n||0,this.indexOf(e,n)===n}),!t)return!1;for(var o in n){var a=e.data.startsWith("/")||-1!==e.data.indexOf("login.globo.com"),i=-1!==e.data.indexOf(n[o]);if(a&&i)return!1}return!0},Cadun.logout=function(e,n){if(n||(n="globo.com"),GloboIDSDK.isActive())GloboIDSDK.bindLogout().onSuccess((function(){e()}));else{var t="//login.globo.com/logout?realm="+n,o=document.createElement("IFRAME");o.setAttribute("id","cadun-logout"),o.setAttribute("src",t),o.style.width=0,o.style.height=0,document.getElementsByTagName("html")[0].appendChild(o),document.getElementById("cadun-logout").onload=function(){Cadun.cache.clean(),"function"==typeof e&&e.apply(),document.getElementsByTagName("html")[0].removeChild(this)}}},Cadun.user.setPreference=function(e,n){prefsService=function(t){var o="https://cocoon.globo.com/v2/preferences/"+e.context+"/"+e.key+"?value="+e.value;Cadun.Request.ajax({method:"POST",url:o,withCredentials:!0,timeout:5e3,success:function(e){n(e)},error:function(e){n({})}})},Cadun.user.me?prefsService(Cadun.user.me):Cadun.authorize(464,prefsService)},Cadun.user.getPreference=function(e,n){prefsService=function(t){var o="https://cocoon.globo.com/v2/preferences/"+e.context;e.key&&(o=o+"/"+e.key),Cadun.Request.ajax({method:"GET",url:o,withCredentials:!0,timeout:5e3,success:function(e){n(e)},error:function(e){n({})}})},Cadun.user.me?prefsService(Cadun.user.me):Cadun.authorize(464,prefsService)},function(){if(void 0===window.GloboIDSDK){var e=function(){},n=function(){};GloboIDSDK={isActive:function(){return Cadun.util.hasCookie("GLOBOIDSDK")},bindLogin:function(e){return GloboIDSDK.loadURL("globoidsdk://login/"+e),GloboIDSDK},bindLogout:function(){return GloboIDSDK.loadURL("globoidsdk://logout"),GloboIDSDK},onSuccess:function(e){return GloboIDSDK.successCallback=e||n,GloboIDSDK},onFailure:function(n){return GloboIDSDK.failureCallback=n||e,GloboIDSDK},successCallback:n,failureCallback:e,loadURL:function(e){setTimeout((function(){window.location=e}))}}}}(),Cadun.user.checkMissingData=function(e,n,t){if(n=n||function(){console.log("[CheckMissingData] success")},t=t||function(e){console.log("[CheckMissingData] error:",e)},e instanceof Array){Cadun.Request.ajax({method:"GET",url:"https://login.globo.com/api/user/fulfilled-data",withCredentials:!0,timeout:5e3,success:function(o){var a=o.missing;if(a instanceof Array){for(var i=!1,r=0;r<e.length;r++){var u=e[r];if(-1!==a.indexOf(u)){i=!0;break}}n(i)}else t(o)},error:function(e){t(e)}})}else t({error:"requiredData must be Array"})},Cadun.user.requestMissingData=function(e,n,t){var o="https://login.globo.com/{serviceID}#/complemento?required_data={requiredData}".replace("{serviceID}",e).replace("{requiredData}",n.join(","));Cadun.modal.open(o),t&&(Cadun.callback=t)},Cadun.modal=new function(){var e=document.createElement("iframe");e.style.height="100%",e.style.width="100%";var n=document.getElementsByTagName("head")[0],t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href="https://s.glbimg.com/pc/ca/login.css",t.media="all",n.appendChild(t);var o=document.createElement("div");o.className="cadun-modal",o.setAttribute("id","globoid-modal-container");var a=document.createElement("div");a.className="login-wrapper-modal",a.onclick=d;var i=document.createElement("div");i.className="login-modal";var r=document.createElement("div");r.className="close-modal",r.onclick=d,i.appendChild(r),i.appendChild(e),o.appendChild(i),o.appendChild(a);var u={};function d(e){document.body.getElementsByClassName("cadun-modal").length>0&&document.body.removeChild(o),!0!==e&&Cadun.closeModalCallback&&Cadun.closeModalCallback(),document.body.style.overflow=u.bodyOverflow,document.documentElement.style.overflow=u.htmlOverflow,document.body.style.position=u.bodyPosition,document.body.style.height=u.bodyHeight,document.documentElement.style.position=u.htmlPosition,document.documentElement.style.height=u.htmlHeight}this.open=function(n){if(!String(n).match("^https?://login(?:.[^.]+)?.globoi?.com"))throw"[Cadun.JS] ERROR - invalid domain for url:"+n;e.src=n,r.style.display=Cadun.closeButtonDisabled?"none":"block",u.bodyOverflow=document.body.style.overflow,u.htmlOverflow=document.documentElement.style.overflow,u.bodyPosition=document.body.style.position,u.bodyHeight=document.body.style.height,u.htmlPosition=document.documentElement.style.position,u.htmlHeight=document.documentElement.style.height,document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden",document.body.style.position="relative",document.body.style.height="100%",document.documentElement.style.overflow="hidden",document.documentElement.style.position="relative",document.documentElement.style.height="100%";var t=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);a.style.height=t+"px",o.focus(),document.body.appendChild(o)},this.close=d},Cadun.closeLogin=Cadun.modal.close;var Cadun=Cadun||{};!function(){if(void 0===Cadun.Request){var e=/^(?:text|application)\/xml/i,n="application/json",t="text/html",o=/^\s*$/;Cadun.Request={ajax:function(a){var r;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),function(e){"object"==typeof e.data&&(e.data=i(e.data)),!e.data||e.method&&"GET"!=e.method.toUpperCase()||(e.url=function(e,n){return(e+"&"+n).replace(/[&?]{1,2}/,"?")}(e.url,e.data))}(a);var u=a.url,d=a.headers||{},c=a.data,l=a.method||(c?"POST":"GET");for(var s in r.open(l,u,!0),r.timeout=a.timeout||0,r.ontimeout=function(e){var n=a.error.call(n,"timeout",null,null,null)},r.onerror=function(e){a.error.call(this,"Request error",r,r.status,e)},r.onload=function(){var i,u=!1;if(r.readyState===XMLHttpRequest.DONE)if(r.status>=200&&r.status<300||304==r.status){var d=function(o){return o&&(o==t?"html":o.indexOf(n)>-1?"json":e.test(o)&&"xml")||"text"}(r.getResponseHeader("Content-Type"));i=r.responseText;try{"xml"==d?i=r.responseXML:"json"==d&&(i=o.test(i)?null:JSON.parse(i))}catch(e){u=e}if(u)var c=a.error.call(c,"Parse error",r,r.status,u);else var l=a.success.call(l,i,r,r.status)}else var s=a.error.call(s,"error",r,r.status,null)},d["X-Requested-With"]="XMLHttpRequest",(a.contentType||c&&"GET"!=a.method.toUpperCase())&&(d["Content-Type"]=a.contentType||"application/x-www-form-urlencoded"),d)r.setRequestHeader(s,d[s]);r.withCredentials=!!a.withCredentials&&a.withCredentials,r.send(c)}}}function a(e,n,t,o){var i=Array.isArray(n);for(var r in n){var u=n[r];o&&(r=t?o:o+"["+(i?"":r)+"]"),!o&&i?e.add(u.name,u.value):(t?Array.isArray(u):"object"==typeof u)?a(e,u,t,r):e.add(r,u)}}function i(e,n){var t=[];return t.add=function(e,n){this.push(escape(e)+"="+escape(n))},a(t,e,n),t.join("&").replace("%20","+")}}(),window.Cadun&&!0!==window.Cadun.initialized&&Cadun.init();